clusterName: "your-cluster-name"

# Auto Scaling Groups (optional)
autoScalingGroups:
  - name: "web-asg"
    zone: "is1a"
    workerServiceClassPath: "cloud/plan/ssd/1core-2gb"
    minNodes: 2
    maxNodes: 10
    nameServers:
      - "133.242.0.3"
      - "133.242.0.4"
    interfaces:
      - interfaceIndex: 0
        upstream: "shared"
        connectsToLB: true
      - interfaceIndex: 1
        upstream: "switch-xxxxxxxx"
        ipPool:
          - start: "192.168.1.10"
            end: "192.168.1.50"
        netmaskLen: 24
        defaultGateway: "192.168.1.1"
        connectsToLB: false

# Load Balancers (optional)
loadBalancers:
  - name: "web-lb"
    autoScalingGroupName: "web-asg"
    serviceClassPath: "cloud/plan/ssd/1core-2gb"
    nameServers:
      - "133.242.0.3"
    interfaces:
      - interfaceIndex: 0
        upstream: "shared"
      - interfaceIndex: 1
        upstream: "switch-xxxxxxxx"
        ipPool:
          - start: "192.168.1.100"
            end: "192.168.1.110"
        netmaskLen: 24
        defaultGateway: "192.168.1.1"
        vip: "192.168.1.200"
        virtualRouterId: 100

# Applications
applications:
  - name: "webapp"
    spec:
      cpu: 500
      memory: 1024
      scalingMode: "cpu"
      minScale: 1
      maxScale: 3
      scaleInThreshold: 30
      scaleOutThreshold: 80
      image: "nginx:latest"
      exposedPorts:
        - targetPort: 80
          loadBalancerPort: 443
          useLetsEncrypt: true
          host:
            - "example.com"
          healthCheck:
            path: "/health"
            intervalSeconds: 30
            timeoutSeconds: 5
      env:
        - key: "APP_ENV"
          value: "production"
          secret: false
        - key: "DATABASE_URL"
          secret: true
          secretVersion: 1

  - name: "api"
    spec:
      cpu: 1000
      memory: 2048
      scalingMode: "manual"
      fixedScale: 2
      image: "myregistry/api:v1.0.0"
      registryUsername: "username"
      registryPassword: "password"
      registryPasswordVersion: 1
      exposedPorts:
        - targetPort: 8080
          loadBalancerPort: 443
          useLetsEncrypt: true
          host:
            - "api.example.com"
          healthCheck:
            path: "/api/health"
            intervalSeconds: 15
            timeoutSeconds: 5
      env:
        - key: "LOG_LEVEL"
          value: "info"
          secret: false
